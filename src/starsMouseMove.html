<canvas id="body" width="100%" height="100%"></canvas>

<script>
	var stars = []
	
	class pos {
		constructor(x, y, z) {
			this.x = x;
			this.y = y;
			this.z = z;
			stars.push(this)
			console.log(this)
		}
	}
	var canvas = document.getElementById("body");
	var ctx = canvas.getContext("2d");
	
	var mouseX;
	var mouseY;
	
	
	var camX = 0;
	var camY = 0;
	var camZ = 0;
	
	function getRandomStars(numNewStars) {
		for(var i = 0; i < numNewStars; i++) {
			var randomZ = Math.random() * 10 + 1
			var newStarAdded = new pos((Math.random() - 0.5) * 2000 * randomZ, (Math.random() - 0.5) * 2000 * randomZ, randomZ);
		}
	}
	
	function project3D(x, y, z) {
		ctx.fillStyle = "#FF0000";canvas.width
		ctx.fillRect((camX - x) / z + canvas.width / 2, (camY - y) / z + canvas.height / 2, 5, 5);
	}
	
	function drawBG(){
		ctx.clearRect(0, 0, canvas.width, canvas.height);
		canvas.width = window.innerWidth;
		canvas.height = window.innerHeight;
	
		camX = mouseX;
		camY = mouseY;
		for(var i = 0; i < stars.length; i++) {
			project3D(stars[i].x, stars[i].y, stars[i].z)
		}
		camX+=1;
		setTimeout(drawBG, 50);
	}
	
	document.addEventListener('mousemove', (event) => {
		mouseX = event.clientX - window.innerWidth/2;
		mouseY = event.clientY - window.innerHeight /2;
		//console.log(`Mouse X: ${event.clientX}, Mouse Y: ${event.clientY}`);
	});
	
	
	getRandomStars(1000)
	drawBG();
</script>